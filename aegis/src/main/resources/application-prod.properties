spring.application.name=aegis

# Database Configuration - TiDB MySQL (Production)
spring.datasource.url=${DATABASE_URL:jdbc:mysql://gateway01.ap-southeast-1.prod.aws.tidbcloud.com:4000/aegis_security}
spring.datasource.username=${DATABASE_USERNAME:4ASi2rWg4pDfPqV.root}
spring.datasource.password=${DATABASE_PASSWORD:IDi56r49xC86xGxb}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA Configuration
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect
spring.jpa.show-sql=false
spring.jpa.format-sql=false
spring.jpa.properties.hibernate.generate_statistics=false

# SQL Initialization
spring.sql.init.mode=never
spring.jpa.defer-datasource-initialization=false

# Redis Configuration - Azure Redis Cache
spring.data.redis.host=${REDIS_HOST:aegis-redis.redis.cache.windows.net}
spring.data.redis.port=${REDIS_PORT:6380}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.ssl.enabled=true
spring.data.redis.database=0
spring.data.redis.timeout=2000ms
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0

# Logging Configuration (Production)
logging.level.com.gradientgeeks.ageis=INFO
logging.level.com.gradientgeeks.aegis.sfe.service.SignatureValidationService=INFO
logging.level.com.gradientgeeks.aegis.sfe.service.CryptographyService=INFO
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN
logging.level.root=INFO

# Server Configuration
server.port=${PORT:8080}
server.servlet.context-path=/api

# Security Configuration
aegis.security.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:https://aegis-portal.azurewebsites.net,https://www.aegis-security.com}
aegis.security.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
aegis.security.cors.allowed-headers=Content-Type,Authorization,X-Signature,X-Device-Id,X-Timestamp,X-Nonce
aegis.security.cors.max-age=3600

# Management Endpoints
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=never
